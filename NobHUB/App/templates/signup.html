{% extends 'form.html' %}
{% block title%}NobHUB Signup{% endblock %}
{% block body %}

<div class="content">
    <div class="action-container">
        <a href="/" class="btn back-btn">Back</a>
    </div>
    <h1 class="title">New User</h1>
    
  
    <div class="form-container">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
        
            <div class="form-container" style="color: rgb(89, 193, 201)">
                {{messages[0] }} Go to <a href="/login"><button>Login Page</button></a>
            
            </div>
            {% endif %}
        {% endwith %}
        <form action="" method="POST" class="task-form">
            <label for="username" class="form-label">Username</label>
            <!-- <input type="text" name="username" id="username" placeholder="username" class="task-input" required oninvalid="this.setCustomValidity('Username is required')" oninput="this.setCustomValidity('')"> -->
            {{signup_form.hidden_tag()}}
            {{ signup_form.username(id="username", class="task-input", placeholder="Username")}}
            <label for="user_email" class="form-label">Email</label>
            <!-- <input type="email" name="user_email" id="user_email" placeholder="Email" class="task-input" required oninvalid="this.setCustomValidity('Email is required')" oninput="this.setCustomValidity('')"> -->
            {{ signup_form.email(id="user_email", class="task-input", placeholder="Email", oninvalid="this.setCustomValidity('Email is required')", oninput="this.setCustomValidity('')")}}

            <label for="number" class="form-label">Phone Number</label>
            <!-- <input type="text" name="number" id="number" placeholder="" class="task-input"> -->
            {{ signup_form.phoneNumber(id="number", class="task-input", placeholder="Phone Number", oninvalid="this.setCustomValidity('Username is required')", oninput="this.setCustomValidity('')")}}

            <label for="password0" class="form-label">PassWord </label>
                <div class="password">
                    <input type="checkbox" id="togglePassword" class="password-toggle">
            <label for="togglePassword" class="toggle-eye open">
                <ion-icon name="eye-outline"></ion-icon>
            </label>
            <label for="togglePassword" class="toggle-eye close">
                <ion-icon name="eye-off-outline"></ion-icon>
            </label>
                <!-- <input type="password" name="password0" id="password0" placeholder="Password" class="password-input" required > -->
                    {{ signup_form.password0(id="password0", class="password-input", placeholder="Password", oninvalid="this.setCustomValidity('PassWord is required')", oninput="this.setCustomValidity('')")}}
                </div>

            <label for="password1" class="form-label">PassWord </label>
            <div class="password">
                <!-- <input type="password" name="password1" id="password1" placeholder="Confirm PassWord" class="password-input" required oninvalid="this.setCustomValidity('PassWord is required')" oninput="this.setCustomValidity('')"> -->
                {{ signup_form.password1(id="password1", class="password-input", placeholder="Confirm Password", oninvalid="this.setCustomValidity('PassWord is required)", oninput="this.setCustomValidity('')")}}
            </div>
            <button type="submit" class="btn add-btn"> Save </button>
        </form>
        
    </div>
    

</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const toggle = document.getElementById('togglePassword');
    const password = document.getElementById('password0');
    const password1 = document.getElementById('password1');
    const eyeOpen = document.querySelector('.toggle-eye.open');
    const eyeClose = document.querySelector('.toggle-eye.close');

    function updateEye() {
        if (password.type === 'password') {
            eyeOpen.style.display = 'block';
            eyeClose.style.display = 'none';
        } else {
            eyeOpen.style.display = 'none';
            eyeClose.style.display = 'block';
        }
        if (password1.type === 'password') {
            eyeOpen.style.display = 'block';
            eyeClose.style.display = 'none';
        } else {
            eyeOpen.style.display = 'none';
            eyeClose.style.display = 'block';
        }
    }

    toggle.addEventListener('change', function() {
        if (toggle.checked) {
            password.type = 'password';
            password1.type = 'password';
        } else {
            password.type = 'text';
            password1.type = 'text';
        }
        updateEye();
    });

    // Initialize eye icons
    updateEye();
});
</script>

{% endblock %}